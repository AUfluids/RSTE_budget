/*---------------------------------------------------------------------------*\
License
    This file is part of RSTE_budget.

    RSTE_budget is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    RSTE_budget is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
    or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
    for more details.

    You should have received a copy of the GNU General Public License
    along with RSTE_budget. 
    If not, see <http://www.gnu.org/licenses/>.
/*---------------------------------------------------------------------------*\

FunctionObjects
    Foam::fieldAverage

Description
    Field averaging configuration for RSTE budget calculations.
    
    Two fieldAverage instances are used:
    - fieldAverageRSTE_write:     Fields which are written out (UMean, pMean, UPrime2Mean)
    - fieldAverageRSTE_dont_write: Intermediate fields not written out (triple products, gradient products)

Fields averaged
    - Mean velocity (UMean) and Reynolds stresses (UPrime2Mean) - written
    - Pressure gradients, velocity-pressure products, triple correlations, gradient products - internal use

Example usage in controlDict:
\verbatim
functions
{
    #include "calcRSTEcode/fieldAverageRSTE"
}
\endverbatim

SourceFile
    fieldAverageRSTE

Authors
    2025  Christoffer Hansen & Mario Javier Rincon

\*---------------------------------------------------------------------------*/


fieldAverageRSTE_write
{
    type             fieldAverage;
    libs             (fieldFunctionObjects);
    region           region0;
    enabled          true;
    log              true;
    timeStart        $startTimeFieldAverage;
    timeEnd          $endTime;
    executeControl   timeStep;
    executeInterval  1;
    writeControl     adjustableRunTime;
    writeInterval    $writeInterval;
    restartOnRestart false;
    restartOnOutput  false;
    periodicRestart  false;
    restartPeriod    0;

    fields
    (
        U
        {
            mean        yes;
            prime2Mean  yes;
            base        time;           
        }
        p
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
    );
}

fieldAverageRSTE_dont_write
{
    type            fieldAverage;
    libs            (fieldFunctionObjects);
    region          region0;
    enabled         true;
    log             true;
    timeStart       $startTimeFieldAverage;
    timeEnd         $endTime;
    executeControl  timeStep;
    executeInterval 1;
    writeControl        none;
    restartOnRestart    false;
    restartOnOutput     false;
    periodicRestart     false;
    restartPeriod       0;
    
    fields
    (
        // For pressure strain term
        pGradU
        {
            mean        yes;     
            prime2Mean  no;      
            base        time;
        }        
        // Velocity pressure product for calculating <u_i'p'> in the pressure diffusion term
        Up
        {
            mean        yes;     
            prime2Mean  no;      
            base        time;
        }
        // Velocity triple products for calculating <u_i'u_j'u_k'> in the turbulent transport term
        UxUxUx
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UxUxUy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UxUxUz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UxUyUy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UxUzUz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UyUyUy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UyUyUz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UyUzUz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UzUzUz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        UxUyUz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }        
        // Products of velocity gradients for calculating <du_i'/dx_k * du_j'/dx_k> in dissipation term
        gradU
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }    
        gradUxxgradUxx
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        gradUyxgradUyx
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }    
        gradUzxgradUzx
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }   
        gradUxxgradUxy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }   
        gradUyxgradUyy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }    
        gradUzxgradUzy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }    
        gradUxxgradUxz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }   
        gradUyxgradUyz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }    
        gradUzxgradUzz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        } 
        gradUxygradUxy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }  
        gradUyygradUyy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        gradUzygradUzy
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }  
        gradUxygradUxz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }  
        gradUyygradUyz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }  
        gradUzygradUzz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        } 
        gradUxzgradUxz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        } 
        gradUyzgradUyz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }  
        gradUzzgradUzz
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }          
        // Terms for calculating SGS contribution
        divNutSij
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }
        divNutSijU
        {
            mean        yes;
            prime2Mean  no;
            base        time;
        }        
    );
}